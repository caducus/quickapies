<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="QuickapieApp">
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" charset="utf-8">
    <title></title>
    <!-- =====================
    | | Scripts
    ====================== -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js" charset="utf-8"></script>
    <script src="js/app.js" charset="utf-8"></script>
    <script type="module" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.js"></script>
    <!-- =====================
    | | Stylesheets
    ====================== -->
    <link href="https://fonts.googleapis.com/css?family=Pacifico|Quicksand|Roboto:500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body ng-controller="MainController as ctrl">
    <div ng-controller="AuthController as auth">
      <div ng-controller="SearchController as search">
        <nav>
          <div>
            <h1>Quickapies</h1>
          </div>
          <div>
            <ul>
              <li ng-if="!auth.loggedInUser"
                  ng-click="auth.showNewForm = !auth.showNewForm ; auth.showLogInForm = false"
              ><a href="#">Create User</a></li>
              <li ng-if="!auth.loggedInUser"
                  ng-click="auth.showLogInForm = !auth.showLogInForm ; auth.showNewForm = false"
              ><a href="#">Log In</a></li>
              <li ng-if="auth.loggedInUser"
                  ng-click="auth.logOut()"
              ><a href="#">Log Out</a></li>
            </ul>
          </div>
        </nav>
        <div class="userForms">
          <form ng-if="auth.showNewForm"
                ng-submit="auth.createUser()">
            <input type="text" placeholder="username" ng-model="auth.createdUsername"/>
            <input type="password" placeholder="password" ng-model="auth.createdPassword">
            <input type="submit" name="" value="Create">
          </form>
          <form ng-if="auth.showLogInForm"
                ng-submit="auth.logIn()">
            <input type="text" placeholder="username" ng-model="auth.username" />
            <input type="password" placeholder="password" ng-model="auth.password" />
            <input type="submit" value="Log In">
          </form>
        </div>
        <main>
          <!-- ========== SEARCH BAR ============== -->
          <div class="searchBar">
            <div ng-if="auth.loggedInUser">
              <h3>Welcome, {{ auth.loggedInUser }}</h3>
            </div>
            <div class="centerAlign">
              <input type="text" placeholder="keyword" ng-model="searchBox[searchBy]" /><br />
              <select ng-model="searchBy">
                <option value="$"></option>
                <option value="name">NAME</option>
                <option value="ingredients">INGREDIENTS</option>
                <option value="instructions">INSTRUCTIONS</option>
                <option value="tags">TAGS</option>
              </select>
              <!-- Include Keyword: <input type="radio" name="order" value="name" ng-model="filter" id="keyword">
              Exclude Keyword: <input type="radio" name="order" value="noKeyword" ng-model="filter" id="noKeyword" /> -->
            </div>
            <!-- ========== ADD NEW RECIPE ============== -->
            <div class="formAlign" ng-if="auth.loggedInUser">
              <form ng-submit="ctrl.createRecipe(auth.loggedInUserId)">
                <fieldset>
                  <legend>Add a Recipe</legend>
                  <input type="text" placeholder="name" ng-model="ctrl.name" />
                  <input type="text" placeholder="http://" ng-model="ctrl.image" />
                  <input type="text" placeholder="ingredients" ng-model="ctrl.ingredients" />
                  <input type="text" placeholder="cook time" ng-model="ctrl.cookTime" />
                  <input type="number" placeholder="# of servings" ng-model="ctrl.numOfServ" />
                  <input type="text" placeholder="tags" ng-model="ctrl.tags" />
                </fieldset>
                <fieldset>
                  <legend>Instructions</legend>
                  <textarea type="text" placeholder="1. Boil water" ng-model="ctrl.instructions">
                  </textarea>
                </fieldset>
                <div class="centerAlign">
                  <input type="submit" value="Add Recipe">
                </div>
              </form>
            </div>
          </div>
          <!-- ========== SHOW ONE RECIPES ============== -->
          <div ng-if="ctrl.currentRecipeShow" class="showOneRecipe">
            <div class="close-recipe">
              <h6 ng-click="ctrl.currentRecipeShow = false"><a href="#">x</a></h6>
            </div>
            <div class="widthAlign">
              <div class="flexAlign">
                <div>
                  <h2>{{ctrl.currentRecipe.name}}</h2>
                </div>
                <div>
                  <h4><span class="cardTitle">Cook Time:</span> {{ctrl.currentRecipe.cookTime}}</h4>
                  <h4><span class="cardTitle">Servings:</span> {{ctrl.currentRecipe.numOfServ}}</h4>
                </div>
              </div>
              <div class="flexAlign">
                <div class="recipeImage">
                  <img ng-src="{{ctrl.currentRecipe.image}}" alt="recipe image">
                </div>
                <div class="ingredients">
                  <h4 class="cardTitle">Ingredients</h4>
                  <h4>{{ctrl.currentRecipe.ingredients}}</h4>
                </div>
              </div>
              <div>
                <p  class="instructions" style="white-space: pre-line">{{ctrl.currentRecipe.instructions}}</p>
              </div>
              <div class="rightAlign">
                <h5><span class="cardTitle">Tags:</span> {{ctrl.currentRecipe.tags}}</h5>
                <div class="edit-delete">
                  <ul>
                    <li ng-click="ctrl.indexOfEditForm = !ctrl.indexOfEditForm"
                        ng-if="ctrl.currentRecipe.userId === auth.loggedInUserId"
                    ><a href="#">Edit</a></li>
                    <li ng-click="ctrl.deleteRecipe(ctrl.currentRecipe)"
                        ng-if="ctrl.currentRecipe.userId === auth.loggedInUserId"
                    ><a href="#">Delete</a></li>
                  </ul>
                </div>
              </div>
              <div>
                <form ng-if="ctrl.indexOfEditForm" ng-submit="ctrl.editRecipe(ctrl.currentRecipe)">
                  <fieldset>
                    <legend>Edit Your Recipe</legend>
                    <label for="name">Name:</label>
                    <input  type="text"
                            id="name"
                            placeholder="name"
                            ng-value="ctrl.currentRecipe.name"
                            ng-model="ctrl.updatedName"
                    />
                    <label for="image">Image:</label>
                    <input  type="text"
                            id="image"
                            placeholder="http://"
                            ng-value="ctrl.currentRecipe.image"
                            ng-model="ctrl.updatedImage"
                    />
                    <label for="ingredients">Ingredients:</label>
                    <input  type="text"
                            id="ingredients"
                            placeholder="ingredients"
                            ng-value="ctrl.currentRecipe.ingredients"
                            ng-model="ctrl.updatedIngredients"
                    />
                    <label for="cook-time">Cook Time:</label>
                    <input  type="text"
                            id="cook-time"
                            placeholder="15 min."
                            ng-value="ctrl.currentRecipe.cookTime"
                            ng-model="ctrl.updatedCookTime"
                    />
                    <label for="num-of-serv">Number of Servings:</label>
                    <input  type="text"
                            id="num-of-serv"
                            placeholder="# of servings"
                            ng-value="ctrl.currentRecipe.numOfServ"
                            ng-model="ctrl.updatedNumOfServ"
                    />
                    <label for="tags">Tags:</label>
                    <input  type="text"
                            id="tags"
                            placeholder="tags"
                            ng-value="ctrl.currentRecipe.tags"
                            ng-model="ctrl.updatedTags"
                    />
                  </fieldset>
                  <fieldset>
                    <legend>Instructions</legend>
                    <label for="instructions">Instructions:</label>
                    <textarea  type="text"
                            id="instructions"
                            placeholder="instructions"
                            ng-value="ctrl.currentRecipe.instructions"
                            ng-model="ctrl.updatedInstructions">
                            {{recipe.instructions}}
                    </textarea>
                  </fieldset>
                  <input type="submit" value="Edit Recipe">
                </form>
              </div>
            </div>
          </div>
          <div ng-if="!ctrl.currentRecipeShow" class="showOneRecipe">
          </div>
          <!-- ========== SHOW ALL RECIPES ============== -->
          <div class="showAllRecipes">
            <div class="flexAlign" ng-repeat="recipe in ctrl.recipes | filter: searchBox">
              <div>
                <h3 class="clickme" ng-click="ctrl.saveOne(recipe)">{{ recipe.name }}</h3>
              </div>
              <div class="my-recipe" ng-if="recipe.userId === auth.loggedInUserId">
                <img src="images/my-recipe.png" alt="">
              </div>
            </div>
          </div>
        </main>
        <footer>
          <div class="centerAlign">
            <ul>
              <li><a href="#">main</a></li>
              <li><a href="#">about</a></li>
            </ul>
          </div>
          <div class="social-media">
            <ion-icon name="logo-facebook" size="large"></ion-icon>
            <ion-icon name="logo-instagram" size="large"></ion-icon>
            <ion-icon name="logo-twitter" size="large"></ion-icon>
            <ion-icon name="logo-pinterest" size="large"></ion-icon>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>
