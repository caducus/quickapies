<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="QuickapieApp">
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" charset="utf-8">
    <title></title>
    <!-- =====================
    | | Scripts
    ====================== -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js" charset="utf-8"></script>
    <script src="js/app.js" charset="utf-8"></script>
    <!-- =====================
    | | Stylesheets
    ====================== -->
    <link href="https://fonts.googleapis.com/css?family=Pacifico|Quicksand|Roboto:500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body ng-controller="MainController as ctrl">
    <div ng-controller="AuthController as auth">
      <div ng-controller="SearchController as search">
        <nav>
          <div>
            <h1>Quickapies</h1>
          </div>
          <div>
            <ul>
              <li ng-if="!auth.loggedInUser"
                  ng-click="auth.showNewForm = !auth.showNewForm ; auth.showLogInForm = false"
              ><a href="#">Create User</a></li>
              <li ng-if="!auth.loggedInUser"
                  ng-click="auth.showLogInForm = !auth.showLogInForm ; auth.showNewForm = false"
              ><a href="#">Log In</a></li>
              <li ng-if="auth.loggedInUser"
                  ng-click="auth.logOut()"
              ><a href="#">Log Out</a></li>
            </ul>
          </div>
        </nav>
        <div class="userForms">
          <form ng-if="auth.showNewForm"
                ng-submit="auth.createUser()">
            <input type="text" placeholder="username" ng-model="auth.createdUsername"/>
            <input type="password" placeholder="password" ng-model="auth.createdPassword">
            <input type="submit" name="" value="Create">
          </form>
          <form ng-if="auth.showLogInForm"
                ng-submit="auth.logIn()">
            <input type="text" placeholder="username" ng-model="auth.username" />
            <input type="password" placeholder="password" ng-model="auth.password" />
            <input type="submit" value="Log In">
          </form>
        </div>
        <main>
          <!-- ========== SEARCH BAR ============== -->
          <div class="searchBar">
            <div ng-if="auth.loggedInUser">
              <h3>Welcome, {{ auth.loggedInUser }}</h3>
            </div>
            <div class="centerAlign">
              <input type="text" placeholder="keyword" ng-model="searchBox[searchBy]" /><br />
              <select ng-model="searchBy">
                <option value="$"></option>
                <option value="name">NAME</option>
                <option value="ingredients">INGREDIENTS</option>
                <option value="instructions">INSTRUCTIONS</option>
                <option value="tags">TAGS</option>
              </select>
              <!-- Include Keyword: <input type="radio" name="order" value="name" ng-model="filter" id="keyword">
              Exclude Keyword: <input type="radio" name="order" value="noKeyword" ng-model="filter" id="noKeyword" /> -->
            </div>
            <!-- ========== ADD NEW RECIPE ============== -->
            <div class="formAlign" ng-if="auth.loggedInUser">
              <form ng-submit="ctrl.createRecipe()">
                <fieldset>
                  <legend>Add a Recipe</legend>
                  <input type="text" placeholder="name" ng-model="ctrl.name" />
                  <input type="text" placeholder="http://" ng-model="ctrl.image" />
                  <input type="text" placeholder="ingredients" ng-model="ctrl.ingredients" />
                  <input type="text" placeholder="cook time" ng-model="ctrl.cookTime" />
                  <input type="number" placeholder="# of servings" ng-model="ctrl.numOfServ" />
                  <input type="text" placeholder="tags" ng-model="ctrl.tags" />
                </fieldset>
                <fieldset>
                  <legend>Instructions</legend>
                  <textarea type="text" placeholder="1. Boil water" ng-model="ctrl.instructions">
                  </textarea>
                </fieldset>
                <div class="centerAlign">
                  <input type="submit" value="Add Recipe">
                </div>
              </form>
            </div>
          </div>
          <!-- ========== SHOW ONE RECIPES ============== -->
          <div ng-if="ctrl.currentRecipeShow" class="showOneRecipe">
            <div class="widthAlign">
              <div class="flexAlign">
                <div>
                  <h2>{{ctrl.currentRecipe.name}}</h2>
                </div>
                <div>
                  <h4><span class="cardTitle">Cook Time:</span> {{ctrl.currentRecipe.cookTime}}</h4>
                  <h4><span class="cardTitle">Servings:</span> {{ctrl.currentRecipe.numOfServ}}</h4>
                </div>
              </div>
              <div class="flexAlign">
                <div class="recipeImage">
                  <img ng-src="{{ctrl.currentRecipe.image}}" alt="recipe image">
                </div>
                <div class="ingredients">
                  <h4 class="cardTitle">Ingredients</h4>
                  <h4>{{ctrl.currentRecipe.ingredients}}</h4>
                </div>
              </div>
              <div>
                <p>{{ctrl.currentRecipe.instructions}}</p>
              </div>
              <div class="rightAlign">
                <h5><span class="cardTitle">Tags:</span> {{ctrl.currentRecipe.tags}}</h5>
                <h5 ng-click="ctrl.currentRecipeShow = false"><a href="#">Close Recipe</a></h5>
                <div class="edit-delete">
                  <ul>
                    <li ng-click="ctrl.indexOfEditForm = !ctrl.indexOfEditForm"
                        ng-if="auth.loggedInUser"
                    ><a href="#">Edit</a></li>
                    <li ng-click="ctrl.deleteRecipe(ctrl.currentRecipe)"
                        ng-if="auth.loggedInUser"
                    ><a href="#">Delete</a></li>
                  </ul>
                </div>
              </div>
              <div>
                <form ng-if="ctrl.indexOfEditForm" ng-submit="ctrl.editRecipe(ctrl.currentRecipe)">
                  <fieldset>
                  <input  type="text"
                          placeholder="name"
                          ng-value="ctrl.currentRecipe.name"
                          ng-model="ctrl.updatedName"
                  />
                  <input  type="text"
                          placeholder="image"
                          ng-value="ctrl.currentRecipe.image"
                          ng-model="ctrl.updatedImage"
                  />
                  <input  type="text"
                          placeholder="ingredients"
                          ng-value="ctrl.currentRecipe.ingredients"
                          ng-model="ctrl.updatedIngredients"
                  />
                  <input  type="text"
                          placeholder="cookTime"
                          ng-value="ctrl.currentRecipe.cookTime"
                          ng-model="ctrl.updatedCookTime"
                  />
                  <input  type="text"
                          placeholder="numOfServ"
                          ng-value="ctrl.currentRecipe.numOfServ"
                          ng-model="ctrl.updatedNumOfServ"
                  />
                  <textarea  type="text"
                          placeholder="instructions"
                          ng-value="ctrl.currentRecipe.instructions"
                          ng-model="ctrl.updatedInstructions">
                          {{recipe.instructions}}
                  </textarea>
                  <input  type="text"
                          placeholder="tags"
                          ng-value="ctrl.currentRecipe.tags"
                          ng-model="ctrl.updatedTags"
                  />
                  </fieldset>
                  <input type="submit" value="Edit Recipe">
                </form>
              </div>
            </div>
          </div>
          <div ng-if="!ctrl.currentRecipeShow" class="showOneRecipe">
          </div>
          <!-- ========== SHOW ALL RECIPES ============== -->
          <div class="showAllRecipes">
            <ul ng-repeat="recipe in ctrl.recipes | filter: searchBox">
              <li ng-click="ctrl.saveOne(recipe)">{{ recipe.name }}</li>
            </ul>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
